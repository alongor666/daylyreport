# PRD - 车险签单数据分析平台 v2.0

**产品名称**: 车险签单数据分析平台
**版本**: 2.0（全面升级版）
**更新日期**: 2025-11-07
**产品经理**: AI Assistant
**目标用户**: 车险业务团队、数据分析师、管理层

---

## 一、产品概述

### 1.1 产品定位
现代化的车险签单数据实时分析与可视化平台，帮助业务团队快速洞察签单趋势、识别业务机会、优化运营决策。

### 1.2 核心价值
- **实时洞察**: 秒级数据刷新，实时掌握业务动态
- **智能分析**: 多维度筛选，智能对比分析
- **移动优先**: 响应式设计，随时随地查看数据
- **易用高效**: 现代化UI，降低学习成本

### 1.3 升级背景
- **v1.0问题**: 交互笨重、视觉过时、性能不佳、移动端体验差
- **升级目标**: 用户体验提升80%、性能提升50%、代码可维护性提升100%

---

## 二、用户画像与场景

### 2.1 核心用户

**角色1: 业务经理** (40%)
- 每天查看3-5次数据
- 关注当日目标完成情况
- 需要快速筛选团队/机构数据
- 移动端使用占60%

**角色2: 数据分析师** (30%)
- 深度分析周/月趋势
- 需要多维度对比
- 导出数据进行二次分析
- PC端使用为主

**角色3: 高层管理** (20%)
- 关注整体KPI达成率
- 查看机构排名
- 移动端快速浏览
- 偶尔查看详细趋势

**角色4: 一线业务员** (10%)
- 查看个人业绩
- 对比团队平均值
- 移动端为主

### 2.2 核心场景

**场景1: 早会数据汇报** (高频)
- 时间: 每天早上9:00
- 需求: 快速查看昨日/本周数据，生成汇报
- 痛点: 数据刷新慢，筛选麻烦

**场景2: 移动端快速查看** (高频)
- 时间: 碎片时间
- 需求: 手机上快速查看关键指标
- 痛点: 移动端体验差

**场景3: 深度分析** (中频)
- 时间: 周/月末
- 需求: 对比多个维度，发现业务趋势
- 痛点: 缺少高级筛选和对比功能

---

## 三、功能需求

### 3.1 核心功能（MVP）

#### F1: 数据仪表板
**优先级**: P0
**描述**: 展示实时KPI和趋势图表

**功能点**:
1. **KPI卡片** (4个)
   - 签单总保费（带7天趋势sparkline）
   - 保单件数（带同比增长率）
   - 手续费（带环比变化）
   - 目标差距（带目标完成度进度条）

2. **周对比图表**
   - 支持保费/件数切换
   - 3周对比柱状图
   - 悬停显示详细数据
   - 响应式图表尺寸

3. **日期选择器**
   - 快捷选项：今天、昨天、本周、上周
   - 日历选择器
   - 日期范围选择（未来）

**交互**:
- KPI卡片点击展开详情
- 图表支持拖拽缩放
- 平滑过渡动画

**性能指标**:
- 首屏加载 < 2s
- 图表渲染 < 500ms
- 数据切换 < 300ms

---

#### F2: 高级筛选器
**优先级**: P0
**描述**: 多维度数据筛选，支持组合条件

**功能点**:
1. **折叠面板设计**
   - 默认收起，显示已选条件数量
   - 点击展开显示所有筛选项
   - 支持快速清除

2. **筛选维度** (8个)
   - 三级机构
   - 团队（与机构联动）
   - 新业务分类（新/转/续）
   - 能源类型（新能源/非新能源）
   - 过户车标记
   - 险种大类
   - 吨位分段
   - 电销标记

3. **筛选交互**
   - 多选支持（checkbox）
   - 标签显示已选项
   - 点击标签快速移除
   - "应用筛选"按钮

4. **筛选预设**（未来）
   - 保存常用筛选组合
   - 命名和管理预设
   - 团队共享预设

**交互**:
- 实时搜索过滤选项
- 机构选择自动联动团队
- 筛选历史记录

**性能指标**:
- 筛选响应 < 500ms
- 支持10万+条数据实时过滤

---

#### F3: 数据刷新
**优先级**: P0
**描述**: 处理新Excel数据并更新展示

**功能点**:
1. **一键刷新**
   - 点击按钮触发刷新
   - 进度条显示处理状态
   - Toast通知刷新结果

2. **自动刷新**（未来）
   - 每小时自动检查新数据
   - 后台静默刷新
   - 有新数据时提醒用户

3. **刷新状态**
   - 处理中: Skeleton占位
   - 成功: Toast提示 + 数据更新动画
   - 失败: 错误提示 + 重试按钮

**交互**:
- Loading状态不阻塞界面
- 乐观更新（先显示旧数据）
- 支持取消刷新

**性能指标**:
- 处理1000条数据 < 3s
- 前端更新 < 1s

---

### 3.2 增强功能（V2.1）

#### F4: 数据导出
**优先级**: P1
**描述**: 导出当前筛选的数据为Excel/CSV

**功能点**:
- 导出当前视图数据
- 支持Excel和CSV格式
- 包含图表截图

#### F5: 对比分析
**优先级**: P1
**描述**: 同比/环比对比分析

**功能点**:
- 周同比（W vs W-1 vs W-2）
- 月同比（本月 vs 上月）
- 自定义日期范围对比

#### F6: 数据钻取
**优先级**: P2
**描述**: 点击图表深入查看明细

**功能点**:
- 图表点击查看该天详情
- 面包屑导航
- 返回上一级

---

### 3.3 未来规划（V3.0）

#### F7: 智能预警
- 目标未达成预警
- 业务异常波动提醒
- 自定义预警规则

#### F8: 协作功能
- 评论和标注
- 数据分享链接
- 团队工作台

#### F9: AI洞察
- 自然语言查询
- 智能趋势预测
- 业务建议推荐

---

## 四、非功能需求

### 4.1 性能要求
| 指标 | 目标值 | 测量方法 |
|------|--------|----------|
| 首屏加载时间 | < 2s | Lighthouse |
| 图表渲染时间 | < 500ms | Performance API |
| API响应时间 | < 1s | Network监控 |
| 内存占用 | < 150MB | Chrome DevTools |

### 4.2 兼容性要求
- **浏览器**: Chrome 90+, Edge 90+, Firefox 88+, Safari 14+
- **操作系统**: Windows 10+, macOS 11+, iOS 14+, Android 10+
- **屏幕尺寸**: 320px - 2560px
- **信创系统**: 统信UOS, 麒麟OS

### 4.3 可用性要求
- **WCAG 2.1 AA**: 颜色对比度、键盘导航、屏幕阅读器
- **响应式**: 移动端、平板、桌面端适配
- **国际化**: 支持中文、英文（未来）

### 4.4 安全性要求
- API鉴权（Token）
- HTTPS加密
- XSS/CSRF防护
- 数据脱敏

---

## 五、技术架构

### 5.1 技术栈

**前端**:
- **框架**: Vue 3 (Composition API)
- **构建**: Vite 5
- **状态管理**: Pinia
- **HTTP**: Axios
- **图表**: ECharts 5
- **样式**: CSS Variables + BEM

**后端**:
- **框架**: Flask 3.0
- **数据处理**: Pandas
- **Excel解析**: openpyxl

**部署**:
- **前端**: Nginx静态托管
- **后端**: Gunicorn + Nginx反向代理
- **服务器**: Linux/Docker

### 5.2 架构设计

```
┌─────────────────────────────────────────┐
│         Vue 3 SPA (Vite)                │
├─────────────────────────────────────────┤
│  Components    │  Stores   │  Services  │
│  - Dashboard   │  - app    │  - api     │
│  - KpiCard     │  - filter │  - utils   │
│  - ChartView   │  - data   │            │
│  - FilterPanel │           │            │
├─────────────────────────────────────────┤
│          Flask REST API                 │
├─────────────────────────────────────────┤
│     Pandas Data Processing              │
└─────────────────────────────────────────┘
```

### 5.3 数据流

```
用户操作 → Pinia Store → API Service → Flask Backend
    ↓                                        ↓
  更新UI  ←  响应式更新  ←  JSON响应  ←  Pandas处理
```

---

## 六、UI/UX设计

### 6.1 设计系统

**配色方案**:
```css
/* 主色 - 专业蓝 */
--primary: #3B82F6
--primary-dark: #1D4ED8
--primary-light: #EFF6FF

/* 功能色 */
--success: #10B981  /* 增长 */
--warning: #F59E0B  /* 警告 */
--error: #EF4444    /* 下降 */
--info: #6366F1     /* 信息 */

/* 中性色 */
--gray-50: #F9FAFB
--gray-900: #111827

/* 渐变 */
--gradient-primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%)
```

**字体系统**:
```css
--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
               "Microsoft YaHei", sans-serif

/* Type Scale (1.25x) */
--text-xs: 12px
--text-sm: 14px
--text-base: 16px
--text-lg: 20px
--text-xl: 24px
--text-2xl: 30px
--text-3xl: 36px
```

**间距系统**:
```css
--space-1: 4px
--space-2: 8px
--space-3: 12px
--space-4: 16px
--space-6: 24px
--space-8: 32px
```

### 6.2 核心组件

#### Toast通知
- 位置: 右上角
- 类型: success / warning / error / info
- 自动消失: 3s
- 支持手动关闭

#### KPI卡片
```
┌────────────────────────────┐
│ 📊 签单总保费              │
│                            │
│ 20.5万 ↑ 12.5%            │
│ [7天趋势sparkline图]        │
│                            │
│ 近7天: 145.2万  近30天: 580万 │
└────────────────────────────┘
```

#### 筛选面板
```
┌─────────────────────────────────┐
│ 🔍 筛选条件 (2项已选) ▼         │
├─────────────────────────────────┤
│ [标签] 成都 ×  [标签] 新能源 ×  │
│                                 │
│ 📍 机构团队                     │
│   三级机构: [下拉框]            │
│   团队: [下拉框]               │
│                                 │
│ 🚗 车辆属性                     │
│   [复选框] 新能源               │
│   [复选框] 过户车               │
│                                 │
│ [重置] [应用筛选]               │
└─────────────────────────────────┘
```

---

## 七、开发计划

### 7.1 里程碑

**Phase 1: 基础架构** (Week 1)
- Vue 3 + Vite项目搭建
- 设计系统实现
- 核心组件开发
- 状态管理配置

**Phase 2: 核心功能** (Week 2)
- Dashboard页面
- KPI卡片组件
- 图表组件
- 筛选器组件

**Phase 3: 交互优化** (Week 3)
- 动画效果
- 响应式适配
- 性能优化
- 错误处理

**Phase 4: 测试上线** (Week 4)
- 单元测试
- E2E测试
- 性能测试
- 部署上线

### 7.2 风险评估

| 风险 | 影响 | 概率 | 应对措施 |
|------|------|------|----------|
| 数据迁移问题 | 高 | 中 | 保留v1.0作为备份 |
| 性能未达标 | 中 | 低 | 提前做性能测试 |
| 用户学习成本 | 中 | 中 | 提供操作指南 |
| 浏览器兼容性 | 低 | 低 | 使用Polyfill |

---

## 八、成功指标

### 8.1 业务指标
- 日活跃用户 +50%
- 平均停留时长 +30%
- 数据查询次数 +40%
- 移动端访问占比 >50%

### 8.2 技术指标
- 首屏加载时间 < 2s
- Lighthouse评分 > 90
- 无关键性能瓶颈
- 零崩溃率

### 8.3 用户满意度
- NPS评分 > 8.0
- 易用性评分 > 4.5/5
- 功能完整度 > 4.0/5

---

## 九、附录

### 9.1 参考资料
- [Vue 3官方文档](https://vuejs.org/)
- [ECharts文档](https://echarts.apache.org/)
- [Material Design规范](https://material.io/)

### 9.2 版本历史
- **v1.0** (2024-10): 初始版本，原生JS
- **v2.0** (2025-11): 全面升级，Vue 3架构

### 9.3 相关文档
- [ARCHITECTURE.md](./ARCHITECTURE.md) - 架构设计
- [DESIGN_SYSTEM.md](./DESIGN_SYSTEM.md) - 设计系统
- [MIGRATION_GUIDE.md](./MIGRATION_GUIDE.md) - 迁移指南
