# 设计系统规范

## 任务交代
本文件用于指导智能助手或前端工程师实现一致的视觉与交互体验，尤其是护眼配色、标签格式、tooltip 布局等细节，避免重构时偏离现有业务习惯。

## 配色规范
| 场景 | 色值 | 含义 |
|------|------|------|
| D（最新周） | #5B8DEF | 主数据，强调当前口径 |
| D-7（上一周） | #8B95A5 | 辅助信息 |
| D-14（上上周） | #C5CAD3 | 背景比较 |
| 上升趋势 | #52C41A | 正向提示 |
| 下降趋势 | #F5222D | 警示提醒 |
| 持平/中性 | #8B95A5 | 默认状态 |

## 排版与单位
- KPI 卡：
  - 保费/手续费/目标差距使用“万元整数”+“万元”字样。
  - 件数使用千分位数字。
  - 占比使用 `XX.X%`，输入范围必须是 0~1。
- 周对比图：日期轴显示“周一~周日”，标签格式“D (MM-DD): 数值 趋势符号 变化率”。
- Tooltip：6 列布局（色点、日期、当前值、箭头、变化值、变化率），列宽固定，数值居中。

## 组件约定
1. **GlobalFilterToolbar**
   - Summary Bar 默认文案“无筛选条件”；超过 6 个标签时折叠为 `+N` 显示。
   - 所有按钮需具备 aria-label 与键盘可达性（回车/空格可触发）。
   - 保单号筛选后，业务员/机构/团队字段进入锁定态（图标 🔒）。
2. **KpiCard**
   - 支持 `valueType`：`currency`、`number`、`wanInt`、`percent`。
   - Sparkline 使用 ECharts 折线+渐变填充，色彩与主题一致。
   - 当 `validationInfo.mismatch_count > 0` 时在标题右上角显示提示图标。
3. **WeekComparisonChart**
   - 使用 ECharts 柱状堆叠或分组展示 D/D-7/D-14。
   - 鼠标悬停同一天时必须显示三条记录；若某周期无数据，显示“无对比”。
   - 颜色严格遵循配色表，禁止自行添加高饱和色。
4. **RatioCards / PieCharts**
   - 占比值直接采用后端提供的 `ratios.*`，不得在前端重新计算。
   - 图例文字使用中文，单卡最多展示 4 类数据，超出需分页或 tooltip 展示。

## 响应式 & 可访问性
- 320px~599px：
  - 筛选面板以抽屉 / 折叠形式出现。
  - KPI 卡单列排列，图表自动填充宽度。
- ≥600px：
  - 筛选工具栏置顶，KPI 2x2 网格，图表与饼图并列显示。
- 所有交互元素需提供键盘焦点样式、aria 属性和屏幕阅读顺序说明。

## 交付要求
- 新增组件或改动现有组件时必须更新本文件，说明配色、排版、交互与数据依赖。
- 若需引入新的色彩或单位，先在此处定义，再在前端实现中引用。
